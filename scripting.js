let e=1;let t=[];const n="4f599baa15d072c9de346b2816a131b8";async function l(){const l=`https://api.themoviedb.org/3/discover/movie?api_key=${n}&page=${e}`;try{const n=await fetch(l),a=(await n.json()).results.map((e=>({title:e.title,url:`https://vidsrc.xyz/embed/movie/${e.id}`,image:`https://image.tmdb.org/t/p/original${e.poster_path}`,plot:e.overview,releaseYear:e.release_date.split("-")[0]})));t.push(...a),o(t),e++}catch(e){console.error("Error loading batch data:",e)}}function o(t){const n=document.querySelector(".channel-list");n.innerHTML="",t.forEach((e=>{const t=`<li class="channel">\n      <div class="handle">☰</div>\n      <button class="play-channel" title="${e.title}" data-url="${e.url}">\n        <div class="thumbnail-wrapper">\n          <img class="channel-poster" src="${e.image}" loading="lazy"> \x3c!-- Lazy load attribute --\x3e\n          <div class="play-icon">▶</div> \x3c!-- Play icon --\x3e\n        </div>\n      </button>\n      <div class="channel-info">\n        <div class="channel-title" data-url="${e.url}">${e.title}</div>\n        <div class="channel-plot">${e.plot.substring(0,100)}...</div> \x3c!-- Snippet of the plot --\x3e\n        <div class="channel-release-year">${e.releaseYear}</div>\n      </div>\n    </li>`;n.insertAdjacentHTML("beforeend",t)}));const l=document.querySelectorAll(".play-channel"),o=document.querySelectorAll(".channel-title");l.forEach((e=>{e.addEventListener("click",(t=>{t.stopPropagation(),a(e)}))})),o.forEach((e=>{e.addEventListener("click",(()=>{a(e)}))})),l.length>0&&1===e&&a(l[0])}function a(e){const t=e.dataset.url||e.getAttribute("data-url"),n=e.closest("li"),l=n.querySelector(".channel-title").textContent,o=n.querySelector(".channel-plot").textContent,a=document.querySelector("#player"),r=document.querySelector("#channel-playing"),c=document.querySelector("#movie-plot");a.src=t,r.textContent=l,c.textContent=o,a.scrollIntoView({behavior:"smooth"})}!async function(){try{await l();const e=document.querySelector("#load-more");e&&e.addEventListener("click",l);const a=document.querySelector("#search-box"),r=document.querySelector("#clear-search");a&&a.addEventListener("input",(e=>{!async function(e){const l=e.target.value;if(l.length<3)return o(t),void(document.querySelector("#load-more").style.display="block");const a=`https://api.themoviedb.org/3/search/movie?api_key=${n}&query=${encodeURIComponent(l)}`;try{const e=await fetch(a),t=(await e.json()).results.map((e=>({title:e.title,url:`https://vidsrc.xyz/embed/movie/${e.id}`,image:`https://image.tmdb.org/t/p/original${e.poster_path}`,plot:e.overview,releaseYear:e.release_date.split("-")[0]})));o(t),t.length>0?document.querySelector("#load-more").style.display="none":document.querySelector("#load-more").style.display="block"}catch(e){console.error("Error searching for channels:",e)}}(e),r.style.display=e.target.value?"inline-block":"none"})),r.addEventListener("click",(()=>{a.value="",r.style.display="none",o(t),document.querySelector("#load-more").style.display="block"}))}catch(e){console.error("Error loading channel data:",e)}}();
