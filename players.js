const API_KEY="4f599baa15d072c9de346b2816a131b8",BASE_URL="https://api.themoviedb.org/3",IMAGE_BASE_URL="https://image.tmdb.org/t/p/w500",urlParams=new URLSearchParams(window.location.search),tvShowId=urlParams.get("id");async function fetchTvShowDetails(){try{const e=await fetch(`${BASE_URL}/tv/${tvShowId}?api_key=${API_KEY}&language=en-US`),t=await e.json();displayTvShowDetails(t),populateSeasonDropdown(t.seasons)}catch(e){console.error("Error fetching TV show details:",e)}}function displayTvShowDetails(e){document.getElementById("tv-title-info").textContent=e.name,document.getElementById("tv-poster").src=IMAGE_BASE_URL+e.poster_path,document.getElementById("tv-overview").textContent=e.overview,document.getElementById("release-year").textContent=e.first_air_date.split("-")[0],document.getElementById("rating").textContent=e.vote_average,document.getElementById("genres").textContent=e.genres.map(e=>e.name).join(", "),document.getElementById("creator").textContent=e.created_by.map(e=>e.name).join(", ")}function populateSeasonDropdown(e){const t=document.getElementById("season-dropdown"),n=e.find(e=>e.air_date);e.filter(e=>e.air_date).forEach(e=>{const n=document.createElement("option");n.value=e.season_number,n.textContent=`Season ${e.season_number}`,t.appendChild(n)}),n&&(t.value=n.season_number,fetchEpisodes())}async function fetchEpisodes(){const e=document.getElementById("season-dropdown").value;if(e){const t=await fetch(`${BASE_URL}/tv/${tvShowId}/season/${e}?api_key=${API_KEY}&language=en-US`),n=await t.json();populateEpisodeDropdown(n.episodes)}}function populateEpisodeDropdown(e){const t=document.getElementById("episode-dropdown");t.style.display="block",t.innerHTML='<option value="">Select Episode</option>';const n=e.find(e=>e.air_date);e.filter(e=>e.air_date).forEach(e=>{const n=document.createElement("option");n.value=e.episode_number,n.textContent=`Episode ${e.episode_number}: ${e.name}`,t.appendChild(n)}),n&&(t.value=n.episode_number,changeEpisode())}function changeEpisode(){const e=document.getElementById("season-dropdown").value,t=document.getElementById("episode-dropdown").value;e&&t&&(document.getElementById("video-player").src=`https://vidsrc.xyz/embed/tv?tmdb=${tvShowId}&season=${e}&episode=${t}`)}function goBack(){window.location.href="shows.html"}fetchTvShowDetails();
